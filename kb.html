<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kurzbriefe Automation</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
        }
        .form-section {
            margin-bottom: 20px;
        }
        .form-section label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
        }
        .form-section input, .form-section select, .form-section textarea {
            width: 100%;
            padding: 8px;
            margin-bottom: 10px;
        }
        .form-section textarea {
            height: 100px;
        }
        .summary {
            margin-top: 20px;
            padding: 10px;
            border: 1px solid #000;
        }
    </style>
</head>
<body>
    <h1>Kurzbriefe Automation</h1>
    <form id="kurzbriefeForm">
        <div class="form-section">
            <label for="vorname">Vorname</label>
            <input type="text" id="vorname" name="vorname" required>

            <label for="nachname">Nachname</label>
            <input type="text" id="nachname" name="nachname" required>

            <label for="geschlecht">Geschlecht</label>
            <select id="geschlecht" name="geschlecht" required>
                <option value="männlich">männlich</option>
                <option value="weiblich">weiblich</option>
                <option value="divers">divers</option>
            </select>

            <label for="geburtsdatum">Geburtsdatum</label>
            <input type="date" id="geburtsdatum" name="geburtsdatum" required>

            <label for="behandlungsdatum">Seit wann in unserer ambulanten Behandlung?</label>
            <input type="date" id="behandlungsdatum" name="behandlungsdatum" required>
        </div>

        <div class="form-section">
            <h2>Multiaxiale Diagnosen</h2>

            <label for="achse1">Achse I</label>
            <input type="text" id="achse1" name="achse1" required>

            <label for="achse2">Achse II</label>
            <input type="text" id="achse2" name="achse2" required>

            <label for="achse3">Achse III</label>
            <select id="achse3" name="achse3" required>
                <option value="Durchschnittliche Intelligenz">Durchschnittliche Intelligenz</option>
                <option value="Leicht unterdurchschnittliche Intelligenz">Leicht unterdurchschnittliche Intelligenz</option>
                <option value="Weit unterdurchschnittliche Intelligenz">Weit unterdurchschnittliche Intelligenz</option>
                <option value="Überdurchschnittliche Intelligenz">Überdurchschnittliche Intelligenz</option>
                <option value="Weit überdurchschnittliche Intelligenz">Weit überdurchschnittliche Intelligenz</option>
                <option value="Intelligenzminderung (F70)">Intelligenzminderung (F70)</option>
                <option value="Mittelgradige Intelligenzminderung (F71)">Mittelgradige Intelligenzminderung (F71)</option>
                <option value="Schwere Intelligenzminderung (F72)">Schwere Intelligenzminderung (F72)</option>
                <option value="Schwerste Intelligenzminderung (F73)">Schwerste Intelligenzminderung (F73)</option>
            </select>

            <label for="achse4">Achse IV (mehrere Optionen wählbar)</label>
            <div id="achse4">
                <input type="checkbox" id="keine_krankheit" name="achse4" value="Keine körperliche Erkrankung">
                <label for="keine_krankheit">Keine körperliche Erkrankung</label><br>
                <input type="checkbox" id="krankheit" name="achse4" value="Körperliche Erkrankung">
                <label for="krankheit">Körperliche Erkrankung (bitte angeben)</label>
                <input type="text" id="achse4_text" name="achse4_text" placeholder="Beschreibung der Erkrankung">
            </div>

            <label for="achse5">Achse V</label>
            <select id="achse5" name="achse5" required>
                <option value="0 Keine Probleme">0 Keine Probleme</option>
                <option value="1 Abnorme intrafamiliäre Beziehungen">1 Abnorme intrafamiliäre Beziehungen</option>
                <option value="2 Psychische Störung, abweichendes Verhalten oder Behinderung in der Familie">2 Psychische Störung, abweichendes Verhalten oder Behinderung in der Familie</option>
                <option value="3 Inadäquate oder verzerrte intrafamiliäre Kommunikation">3 Inadäquate oder verzerrte intrafamiliäre Kommunikation</option>
                <option value="4 Abnorme Erziehungsbedingungen">4 Abnorme Erziehungsbedingungen</option>
                <option value="5 Abnorme unmittelbare Umgebung">5 Abnorme unmittelbare Umgebung</option>
                <option value="6 Akute, belastende Lebensereignisse">6 Akute, belastende Lebensereignisse</option>
                <option value="7 Gesellschaftliche Belastungsfaktoren">7 Gesellschaftliche Belastungsfaktoren</option>
                <option value="8 Chronische zwischenmenschliche Belastung im Zusammenhang mit Schule und Arbeit">8 Chronische zwischenmenschliche Belastung im Zusammenhang mit Schule und Arbeit</option>
                <option value="9 Belastende Lebensereignisse / Situationen infolge von Verhaltensstörungen / Behinderungen des Kindes">9 Belastende Lebensereignisse / Situationen infolge von Verhaltensstörungen / Behinderungen des Kindes</option>
            </select>

            <label for="achse6">Achse VI</label>
            <select id="achse6" name="achse6" required>
                <option value="1 Herausragende/gute soziale Funktionen">1 Herausragende/gute soziale Funktionen</option>
                <option value="2 Mäßige soziale Funktion">2 Mäßige soziale Funktion</option>
                <option value="3 Leichte soziale Beeinträchtigung">3 Leichte soziale Beeinträchtigung</option>
                <option value="4 Mäßige soziale Beeinträchtigung">4 Mäßige soziale Beeinträchtigung</option>
                <option value="5 Ernsthafte soziale Beeinträchtigung">5 Ernsthafte soziale Beeinträchtigung</option>
                <option value="6 Funktionsunfähig in den meisten Bereichen">6 Funktionsunfähig in den meisten Bereichen</option>
                <option value="7 Tiefe und durchgängige soziale Beeinträchtigung">7 Tiefe und durchgängige soziale Beeinträchtigung</option>
                <option value="8 Nicht zutreffend/nicht einschätzbar">8 Nicht zutreffend/nicht einschätzbar</option>
            </select>
        </div>

        <div class="form-section">
            <label for="anamnese">Anamnese</label>
            <textarea id="anamnese" name="anamnese" required></textarea>

            <label for="psychobefund">Psychopathologischer Befund</label>
            <textarea id="psychobefund" name="psychobefund" required></textarea>
        </div>

        <div class="form-section">
            <label for="empfehlungen">Zusammenfassung und Empfehlungen</label>
            <select id="empfehlungen" name="empfehlungen" multiple required>
                <option value="Weiterbehandlung mit bisheriger Medikation in der gleichen Dosis">Weiterbehandlung mit bisheriger Medikation in der gleichen Dosis</option>
                <option value="EKG-Kontrolle am">EKG-Kontrolle am</option>
                <option value="Blutbildkontrolle am">Blutbildkontrolle am</option>
                <option value="X-Medikation Spiegel Kontrolle am">X-Medikation Spiegel Kontrolle am</option>
                <option value="Gemäß der Leitlinie">Gemäß der Leitlinie</option>
                <option value="WiederVorstellung in 2 Wochen">WiederVorstellung in 2 Wochen</option>
                <option value="WiederVorstellung in 4 Wochen">WiederVorstellung in 4 Wochen</option>
                <option value="WiederVorstellung in 3 Monaten">WiederVorstellung in 3 Monaten</option>
                <option value="WiederVorstellung in 6 Monaten">WiederVorstellung in 6 Monaten</option>
                <option value="Bei Bedarf">Bei Bedarf</option>
            </select>
        </div>

        <button type="button" onclick="generateReport()">Bericht generieren</button>
    </form>

    <div class="summary" id="summary"></div>

    <script>
        function generateReport() {
            const form = document.getElementById('kurzbriefeForm');
            const vorname = form.vorname.value;
            const nachname = form.nachname.value;
            const geschlecht = form.geschlecht.value;
            const geburtsdatum = form.geburtsdatum.value;
            const behandlungsdatum = form.behandlungsdatum.value;
            const achse1 = form.achse1.value;
            const achse2 = form.achse2.value;
            const achse3 = form.achse3.value;
            const achse4Inputs = document.querySelectorAll('#achse4 input[type="checkbox"]:checked');
            const achse4 = Array.from(achse4Inputs).map(input => input.value).join(', ') + ' ' + form.achse4_text.value;
            const achse5 = form.achse5.value;
            const achse6 = form.achse6.value;
            const anamnese = form.anamnese.value;
            const psychobefund = form.psychobefund.value;
            const empfehlungen = Array.from(form.empfehlungen.selectedOptions).map(option => option.value).join(', ');

            let geschlechtText = '';
            if (geschlecht === 'männlich') {
                geschlechtText = 'Herr';
            } else if (geschlecht === 'weiblich') {
                geschlechtText = 'Frau';
            } else {
                geschlechtText = 'die Person';
            }

            const recommendationSentences = {
                "Weiterbehandlung mit bisheriger Medikation in der gleichen Dosis": `Wir empfehlen, bei ${vorname} die bisherige Medikation in der gleichen Dosis fortzusetzen.`,
                "EKG-Kontrolle am": `Eine EKG-Kontrolle wird am ... durchgeführt.`,
                "Blutbildkontrolle am": `Eine Blutbildkontrolle wird am ... durchgeführt.`,
                "X-Medikation Spiegel Kontrolle am": `Eine Kontrolle des Spiegels von X-Medikation wird am ... durchgeführt.`,
                "Gemäß der Leitlinie": `Die Behandlung erfolgt gemäß der Leitlinie.`,
                "WiederVorstellung in 2 Wochen": `Wir empfehlen eine Wiedervorstellung in 2 Wochen.`,
                "WiederVorstellung in 4 Wochen": `Wir empfehlen eine Wiedervorstellung in 4 Wochen.`,
                "WiederVorstellung in 3 Monaten": `Wir empfehlen eine Wiedervorstellung in 3 Monaten.`,
                "WiederVorstellung in 6 Monaten": `Wir empfehlen eine Wiedervorstellung in 6 Monaten.`,
                "Bei Bedarf": `Eine Wiedervorstellung erfolgt bei Bedarf.`
            };

            const recommendations = empfehlungen.split(', ').map(option => recommendationSentences[option]).join(' ');

            const report = `
                <p>Wir berichten über ${geschlechtText} ${vorname} ${nachname}, geboren am ${geburtsdatum}, der/die sich seit ${behandlungsdatum} in unserer ambulanten Behandlung befindet.</p>
                <h2>Multiaxiale Diagnosen:</h2>
                <p>Achse I: ${achse1}</p>
                <p>Achse II: ${achse2}</p>
                <p>Achse III: ${achse3}</p>
                <p>Achse IV: ${achse4}</p>
                <p>Achse V: ${achse5}</p>
                <p>Achse VI: ${achse6}</p>
                <h2>Anamnese:</h2>
                <p>${anamnese}</p>
                <h2>Psychopathologischer Befund:</h2>
                <p>${psychobefund}</p>
                <h2>Zusammenfassung und Empfehlungen:</h2>
                <p>${recommendations}</p>
            `;

            document.getElementById('summary').innerHTML = report;
        }
    </script>
</body>
</html>
